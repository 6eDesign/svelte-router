{"version":3,"file":"chunk-e9419b5b.js","sources":["../../src/Components/Route.html"],"sourcesContent":["<script context=\"module\">\n\texport const ROUTE = { }; \n</script>\n\n<script>\n\timport { getContext, setContext, onDestroy } from 'svelte';\n\timport { writable } from 'svelte/store';\n\timport { ROUTER } from './Router.html';\n\n\tconst { registerRoute, selectedRoute } = getContext(ROUTER);\n\n\t// props\n\texport let path; \n\texport let asyncComponent = null;\n\n\t// template variables\n\tlet componentPromise; \n\tlet target;\n\n\tconst route = { path, asyncComponent, ctx: { } };\n\n\tsetContext(ROUTE, route);\n\t\n\tregisterRoute(route);\n\tselectedRoute.subscribe(selected => {\n\t\tif(!selected) return;\n\t\troute.ctx = selected.ctx;\n\t\tif(asyncComponent && selected && selected.route == route) {\n\t\t\tcomponentPromise = Promise.all([\n\t\t\t\tasyncComponent(), \n\t\t\t\t// todo: optionally fetch data/props concurrently with component import?\n\t\t\t])\n\t\t\t.then(([{default: Component}, props]) => {\n\t\t\t\treturn new Component({\n\t\t\t\t\ttarget\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log('Todo: handle error with generic/specific handler:\\n', err)\n\t\t\t\tthrow err;\n\t\t\t}); \n\t\t}\n\t});\n\n\n</script>\n\n{#if $selectedRoute && $selectedRoute.route == route}\n\t{#if asyncComponent}\n\t\t{#await componentPromise}\n\t\t\t<slot name=\"loading\">\n\t\t\t\t<p>Loading... </p>\n\t\t\t</slot>\n\t\t{:then}\n\t\t{:catch}\n\t\t\t<slot name=\"error\">\n\t\t\t\tError!\n\t\t\t</slot>\n\t\t{/await}\n\t\t<div bind:this={target}></div>\n\t{:else}\n\t\t<slot name=\"component\"></slot>\n\t{/if}\n{/if}"],"names":[],"mappings":";;;;;;;;;;;UAgDM,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6BACV,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;qEAAhB,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qBAFrB,cAAc,QAAI,cAAc,CAAC,KAAK,QAAI,KAAK;;;;;;;;;;;;;;;;;;WAA/C,cAAc,QAAI,cAAc,CAAC,KAAK,QAAI,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;AA9C5C,MAAM,KAAK,GAAG,GAAG,CAAC;;;;;CAQzB,MAAM,EAAE,aAAa,EAAE,aAAa,EAAE,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;;;CAGrD,MAAI,IAAI,EACJ,cAAc,GAAG,gBAAI,CAAC;;;CAGjC,IAAI,gBAAgB,CAAC;CACrB,IAAI,MAAM,CAAC;;CAEX,MAAM,KAAK,GAAG,EAAE,IAAI,EAAE,cAAc,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;;CAEjD,UAAU,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;;CAEzB,aAAa,CAAC,KAAK,CAAC,CAAC;CACrB,aAAa,CAAC,SAAS,CAAC,QAAQ,IAAI;EACnC,GAAG,CAAC,QAAQ,EAAE,OAAO;EACrB,KAAK,CAAC,GAAG,GAAG,QAAQ,CAAC,GAAG,+BAAC;EACzB,GAAG,cAAc,IAAI,QAAQ,IAAI,QAAQ,CAAC,KAAK,IAAI,KAAK,EAAE;GACzD,gBAAgB,GAAG,OAAO,CAAC,GAAG,CAAC;IAC9B,cAAc,EAAE;;IAEhB,CAAC;IACD,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,KAAK,CAAC,KAAK;IACxC,OAAO,IAAI,SAAS,CAAC;KACpB,MAAM;KACN,CAAC,CAAC;IACH,CAAC;IACD,KAAK,CAAC,GAAG,IAAI;IACb,OAAO,CAAC,GAAG,CAAC,qDAAqD,EAAE,GAAG,EAAC;IACvE,MAAM,GAAG,CAAC;IACV,CAAC,qDAAC;GACH;EACD,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}